You are a QA Review Agent testing ticket TKT-018.

## Ticket: Transcription Auto-Retry with Manual Fallback
## Branch: agent/tkt-018-transcription-auto-retry-with
## Worktree: /Users/ryanodonnell/projects/Digital_greeter/../agent-worktrees/qa-TKT-018

## Acceptance Criteria:
- Failed transcription auto-retries up to 3 times
- Exponential backoff: 1s, 4s, 16s delays
- Retry button appears for permanently failed transcriptions
- Retry attempts are logged with error details
- Non-retriable errors (audio too short) skip retry logic

## CRITICAL INSTRUCTIONS:

1. **You are in an ISOLATED WORKTREE** at: /Users/ryanodonnell/projects/Digital_greeter/../agent-worktrees/qa-TKT-018
   - All your testing happens here
   - This does NOT affect the main repo

2. **Run these tests IN THE WORKTREE:**
   cd /Users/ryanodonnell/projects/Digital_greeter/../agent-worktrees/qa-TKT-018
   pnpm install
   pnpm typecheck
   pnpm build  
   pnpm test

3. **Verify each acceptance criterion**

4. **If PASS - Write report to MAIN REPO:**
   - File: /Users/ryanodonnell/projects/Digital_greeter/docs/agent-output/qa-results/QA-TKT-018-PASSED-20251206T215021.md
   - Include the selective merge command (see below)

5. **If FAIL - Create BOTH files in MAIN REPO:**
   - Blocker JSON: /Users/ryanodonnell/projects/Digital_greeter/docs/agent-output/blocked/QA-TKT-018-FAILED-20251206T215021.json
   - Report MD: /Users/ryanodonnell/projects/Digital_greeter/docs/agent-output/qa-results/QA-TKT-018-FAILED-20251206T215021.md

6. **DO NOT modify any files in the main repo except your QA outputs**

7. **If tests PASS, include this merge command in your report:**
   ```bash
   cd /Users/ryanodonnell/projects/Digital_greeter
   git fetch origin main
   git checkout main
   git pull origin main
   # Cherry-pick ONLY the ticket's files:
   git checkout origin/agent/tkt-018-transcription-auto-retry-with -- apps/server/src/features/transcription/processTranscription.ts apps/dashboard/src/features/call-logs/CallLogRow.tsx apps/dashboard/src/app/api/transcription/retry/route.ts
   git add apps/server/src/features/transcription/processTranscription.ts apps/dashboard/src/features/call-logs/CallLogRow.tsx apps/dashboard/src/app/api/transcription/retry/route.ts
   git commit -m 'feat: TKT-018 - Transcription Auto-Retry with Manual Fallback'
   git push origin main
   ```

## If FAILED - Blocker JSON Template:

```json
{
  "ticket_id": "TKT-018",
  "ticket_title": "Transcription Auto-Retry with Manual Fallback",
  "branch": "agent/tkt-018-transcription-auto-retry-with",
  "blocked_at": "[ISO timestamp]",
  "blocker_type": "qa_failure",
  "summary": "[One-line summary of failure]",
  "failures": [
    {
      "category": "build|acceptance|regression|browser",
      "check": "[Which check failed]",
      "error": "[Error message]"
    }
  ],
  "recommendation": "[What needs to be fixed]",
  "dispatch_action": "create_continuation_ticket"
}
```

## Report Template:

# QA Review: TKT-018

**Status:** ✅ PASSED / ❌ FAILED
**Ticket:** TKT-018 - Transcription Auto-Retry with Manual Fallback
**Branch:** agent/tkt-018-transcription-auto-retry-with
**Tested:** 2025-12-06

## Build Verification
| Check | Status |
|-------|--------|
| pnpm install | |
| pnpm typecheck | |
| pnpm build | |
| pnpm test | |

## Acceptance Criteria
(verify each criterion)

## Merge Command
(if passed, include the selective merge command above)

