# Doc Agent: Update Documentation for TKT-034-V2

> **FIRST:** Read the full SOP: `docs/workflow/DOC_AGENT_SOP.md`
>
> The SOP contains the 10-section format, quality checklist, and Mode 2 process.

---

## Context (Mode 2: Post-QA Update)

- **Ticket:** TKT-034-V2 - "TKT-034-V2"
- **Issue:** 
- **Branch:** `agent/tkt-034-v2` (commit here, not main)
- **Session ID:** `7b04307f-4134-4d0b-accf-4eaeae17f9fa`

---

## Files Modified by Dev Agent

- `apps/dashboard/src/app/(app)/admin/calls/calls-client.tsx`
- `apps/dashboard/src/app/(app)/admin/calls/page.tsx`
- `apps/dashboard/src/app/(app)/admin/sites/site-setup-client.tsx`
- `apps/dashboard/src/app/(app)/admin/sites/verification-status.tsx`
- `apps/dashboard/src/app/(app)/dashboard/calls/agent-calls-client.tsx`
- `apps/dashboard/src/app/(app)/dashboard/calls/page.tsx`
- `apps/dashboard/src/app/(app)/platform/feedback/feedback-client.tsx`
- `apps/dashboard/src/features/cobrowse/CobrowseViewer.tsx`
- `apps/server/src/features/recordings/getRecordingUrl.ts`
- `apps/server/src/features/recordings/uploadRecording.ts`

---

## Follow Mode 2 Process from SOP

### STEP 1: Understand What Changed

```bash
# See what the Dev Agent modified
git diff main..HEAD --name-only

# Read the ticket completion report
cat docs/agent-output/completions/TKT-034-V2*.md 2>/dev/null | head -50
```

For each modified file, understand:
- What behavior changed?
- What new scenarios are possible?
- What edge cases were added/fixed?

### STEP 2: Find Existing Docs

```bash
# Check if docs exist for this feature
ls docs/features/
cat docs/features/admin/*.md | head -20  # For admin changes
cat docs/features/billing/*.md | head -20  # For billing changes
```

### STEP 3: Update Documentation

**Use the 10-section format from the SOP:**

If behavior changed, update these sections in the relevant doc:
1. **WHAT IT DOES** - If purpose changed
2. **HOW IT WORKS** - If flow changed  
3. **DETAILED LOGIC** - Update function references, triggers
4. **EDGE CASES** - Add new scenarios
5. **CODE REFERENCES** - Update file paths and line numbers

**Reference an existing doc for format:**
```bash
cat docs/features/visitor/widget-lifecycle.md | head -100
```

### STEP 4: Write Completion Report

**File:** `docs/agent-output/doc-tracker/TKT-034-V2-$(date +%Y%m%dT%H%M).md`

```markdown
# Doc Complete: TKT-034-V2

- **Ticket:** TKT-034-V2
- **Status:** COMPLETE
- **Doc File:** [path to doc updated or "No changes needed"]
- **Sections Updated:** [list sections]
- **Completed At:** [timestamp]
```

### STEP 5: Commit (if you made changes)

```bash
git add docs/
git commit -m "docs(tkt-034-v2): Update documentation for TKT-034-V2

Sections updated:
- [list sections updated]"
git push origin agent/tkt-034-v2
```

### STEP 6: Signal Completion

```bash
curl -X POST http://localhost:3456/api/v2/agents/7b04307f-4134-4d0b-accf-4eaeae17f9fa/complete \
  -H "Content-Type: application/json" \
  -d '{"success": true}'
```

---

## Quality Checklist (from SOP)

Before marking complete:
- [ ] Every code path is documented
- [ ] Scenarios match actual code behavior
- [ ] Edge cases are covered
- [ ] Error states documented
- [ ] Used 10-section format
- [ ] Completion report written
