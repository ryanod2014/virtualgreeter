<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PM Dashboard â€¢ Digital Greeter</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-base: #050508;
      --bg-surface: #0c0c12;
      --bg-elevated: #141420;
      --bg-hover: #1c1c2a;
      --text-primary: #f4f4f8;
      --text-secondary: #9090a8;
      --text-muted: #5a5a70;
      --border: #252538;
      --border-subtle: #1a1a28;
      --critical: #ef4444;
      --critical-bg: rgba(239,68,68,0.12);
      --high: #f97316;
      --high-bg: rgba(249,115,22,0.12);
      --medium: #eab308;
      --medium-bg: rgba(234,179,8,0.12);
      --low: #22c55e;
      --low-bg: rgba(34,197,94,0.12);
      --accent: #6366f1;
      --accent-bright: #818cf8;
      --accent-bg: rgba(99,102,241,0.12);
      --success: #10b981;
      --gradient-hero: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-base);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.5;
    }

    code, .mono { font-family: 'IBM Plex Mono', monospace; }
    ::selection { background: var(--accent); color: white; }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-surface); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .fade-in { animation: fadeIn 0.3s ease; }
    .slide-up { animation: slideUp 0.4s ease; }

    /* Tabs */
    .tabs { display: flex; gap: 4px; background: var(--bg-surface); padding: 4px; border-radius: 12px; border: 1px solid var(--border); }
    .tab { padding: 10px 20px; border: none; background: transparent; color: var(--text-muted); cursor: pointer; border-radius: 8px; font-size: 14px; font-weight: 500; transition: all 0.2s; }
    .tab:hover { color: var(--text-secondary); }
    .tab.active { background: var(--accent-bg); color: var(--accent-bright); }
    .tab .count { margin-left: 6px; padding: 2px 8px; background: var(--bg-elevated); border-radius: 10px; font-size: 12px; }

    /* Cards */
    .card { background: var(--bg-surface); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 12px; }
    .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    
    /* Badges */
    .badge { display: inline-flex; align-items: center; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.3px; }
    .badge-critical { color: var(--critical); background: var(--critical-bg); }
    .badge-high { color: var(--high); background: var(--high-bg); }
    .badge-medium { color: var(--medium); background: var(--medium-bg); }
    .badge-low { color: var(--low); background: var(--low-bg); }
    .badge-pending { color: var(--accent-bright); background: var(--accent-bg); }
    .badge-resolved { color: var(--success); background: rgba(16,185,129,0.12); }

    /* Thread */
    .thread { background: var(--bg-elevated); border-radius: 8px; padding: 16px; margin-top: 12px; }
    .message { padding: 10px 14px; border-radius: 8px; margin-bottom: 8px; max-width: 85%; }
    .message-system { background: var(--bg-surface); border: 1px solid var(--border); margin-right: auto; }
    .message-human { background: var(--accent-bg); border: 1px solid rgba(99,102,241,0.3); margin-left: auto; text-align: right; }
    .message-pm { background: rgba(168,85,247,0.12); border: 1px solid rgba(168,85,247,0.3); margin-right: auto; }

    /* Inputs */
    .input-group { display: flex; gap: 8px; margin-top: 12px; }
    .input { flex: 1; padding: 12px 16px; background: var(--bg-base); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary); font-size: 14px; font-family: inherit; }
    .input:focus { outline: none; border-color: var(--accent); }
    .btn { padding: 12px 20px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: var(--accent-bright); }
    .btn-secondary { background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border); }
    .btn-success { background: var(--success); color: white; }
    .btn-sm { padding: 8px 14px; font-size: 13px; }

    /* Quick answers */
    .quick-answers { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px; }
    .quick-btn { padding: 6px 12px; background: var(--bg-surface); border: 1px solid var(--border); border-radius: 6px; color: var(--text-secondary); font-size: 13px; cursor: pointer; transition: all 0.2s; }
    .quick-btn:hover { border-color: var(--accent); color: var(--accent-bright); }

    /* Command box */
    .command-box { background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-top: 16px; }
    .command-box pre { background: var(--bg-base); padding: 16px; border-radius: 8px; overflow-x: auto; font-size: 13px; line-height: 1.6; }
    .command-box .copy-btn { position: absolute; top: 8px; right: 8px; }

    /* Modal */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 40px; }
    .modal { background: var(--bg-surface); border: 1px solid var(--border); border-radius: 16px; max-width: 700px; width: 100%; max-height: 80vh; overflow: auto; }
    .modal-header { padding: 20px 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
    .modal-body { padding: 24px; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // ================= EMBEDDED DATA =================
    // In production, this would be loaded from JSON files
    
    const FINDINGS_DATA = {
      "findings": [
        {
          "id": "F-001",
          "feature": "Co-Browse Viewer",
          "title": "Password Fields Captured in DOM Snapshots",
          "severity": "critical",
          "issue": "Password field values are captured in DOM snapshots and transmitted to agents.",
          "suggested_fix": "Sanitize password inputs by replacing values with mask characters.",
          "questions": [
            "Should we mask ALL password fields or only specific patterns?",
            "Should this be combined with credit card masking (F-002)?"
          ],
          "status": "ticketed",
          "ticket_id": "TKT-001"
        },
        {
          "id": "F-002",
          "feature": "Co-Browse Viewer",
          "title": "Credit Card and Sensitive Data Also Captured",
          "severity": "critical",
          "issue": "Credit card fields, personal data, and session tokens visible on page are captured.",
          "suggested_fix": "Extend sanitization to mask sensitive input types.",
          "questions": [
            "Should we use allowlist or blocklist approach?",
            "What other field types should be auto-masked?"
          ],
          "status": "ticketed",
          "ticket_id": "TKT-001"
        },
        {
          "id": "F-021",
          "feature": "Call Logs",
          "title": "No Server-Side Pagination for Historical Data",
          "severity": "high",
          "issue": "All call logs are fetched client-side. For orgs with 10k+ calls, this causes performance issues.",
          "suggested_fix": "Implement server-side pagination with cursor-based navigation.",
          "questions": [
            "What's the expected max call volume per org?",
            "Should we add date-range filters to limit data fetched?"
          ],
          "status": "pending"
        },
        {
          "id": "F-022",
          "feature": "Call Logs",
          "title": "Missing Data Retention Policy Enforcement",
          "severity": "high",
          "issue": "Data retention is documented but not enforced. Recordings persist indefinitely.",
          "suggested_fix": "Implement scheduled job to delete data older than org's retention setting.",
          "questions": [
            "Should deletion be immediate when retention is reduced, or have a grace period?",
            "Should we notify users before scheduled deletions?"
          ],
          "status": "pending"
        },
        {
          "id": "F-023",
          "feature": "Call Logs",
          "title": "Cancelled Calls Have No Audit Trail",
          "severity": "medium",
          "issue": "When a call is cancelled before connecting, no record is kept.",
          "suggested_fix": "Log cancelled calls with reason code.",
          "questions": [
            "Is this actually needed for analytics?",
            "Should cancelled calls count toward agent metrics?"
          ],
          "status": "pending"
        },
        {
          "id": "F-030",
          "feature": "Recording Settings",
          "title": "No Recording Consent Indicator for Visitors",
          "severity": "high",
          "issue": "Visitors are recorded with NO indication. Compliance risk for GDPR, CCPA.",
          "suggested_fix": "Add visible recording indicator after call connects.",
          "questions": [
            "Should the indicator be text-based or just an icon?",
            "Should visitors be able to decline recording?"
          ],
          "status": "pending"
        },
        {
          "id": "F-031",
          "feature": "Recordings Storage",
          "title": "Recording URLs Are Publicly Guessable",
          "severity": "high",
          "issue": "Recordings in public bucket with predictable URLs. HIPAA/GDPR risk.",
          "suggested_fix": "Move to private bucket with signed URLs.",
          "questions": [
            "What should the signed URL expiration be? (1 hour suggested)",
            "Do we need to migrate existing recordings?"
          ],
          "status": "pending"
        },
        {
          "id": "F-032",
          "feature": "WebRTC Calls",
          "title": "No ICE Restart on Connection Failure",
          "severity": "high",
          "issue": "When WebRTC fails mid-call, agent must manually end and restart. Customer lost.",
          "suggested_fix": "Implement ICE restart with automatic retry.",
          "questions": [
            "How many auto-retry attempts before giving up?",
            "Should we show 'Reconnecting...' status to both parties?"
          ],
          "status": "pending"
        },
        {
          "id": "F-040",
          "feature": "Incoming Call",
          "title": "Countdown Timer Mismatch with RNA Timeout",
          "severity": "high",
          "issue": "Incoming call shows 30-second countdown but RNA timeout fires at 15 seconds.",
          "suggested_fix": "Fetch org's actual RNA timeout for countdown display.",
          "questions": [
            "Is the RNA timeout configurable per-org in settings UI?",
            "Should we show a warning when less than 5 seconds remain?"
          ],
          "status": "pending"
        }
      ]
    };

    const TICKETS_DATA = {
      "meta": { "total_tickets": 23 },
      "tickets": [
        { "id": "TKT-001", "title": "Co-Browse Sensitive Data Sanitization", "priority": "critical", "status": "ready" },
        { "id": "TKT-002", "title": "Complete Stripe Subscription Cancellation", "priority": "critical", "status": "ready" },
        { "id": "TKT-009", "title": "Org-Level Co-Browse Disable Setting", "priority": "high", "status": "ready" }
      ]
    };

    // ================= COMPONENTS =================

    function Badge({ type, children }) {
      return <span className={`badge badge-${type}`}>{children}</span>;
    }

    function FindingCard({ finding, thread, onAnswer, onResolve }) {
      const [answer, setAnswer] = useState('');
      const isResolved = thread?.status === 'resolved';
      const currentQuestionIndex = thread?.messages?.filter(m => m.role === 'human').length || 0;
      const currentQuestion = finding.questions[currentQuestionIndex];
      const hasMoreQuestions = currentQuestionIndex < finding.questions.length;

      const handleSend = () => {
        if (!answer.trim()) return;
        onAnswer(finding.id, answer);
        setAnswer('');
      };

      const handleQuickAnswer = (text) => {
        onAnswer(finding.id, text);
      };

      return (
        <div className="card slide-up">
          <div className="card-header">
            <div>
              <code style={{ color: 'var(--text-muted)', fontSize: '12px' }}>{finding.id}</code>
              <h3 style={{ fontSize: '16px', fontWeight: 600, marginTop: '4px' }}>{finding.title}</h3>
              <div style={{ fontSize: '13px', color: 'var(--text-muted)', marginTop: '4px' }}>{finding.feature}</div>
            </div>
            <div style={{ display: 'flex', gap: '8px' }}>
              <Badge type={finding.severity}>{finding.severity}</Badge>
              <Badge type={isResolved ? 'resolved' : 'pending'}>
                {isResolved ? 'âœ“ Resolved' : 'Pending'}
              </Badge>
            </div>
          </div>

          <p style={{ fontSize: '14px', color: 'var(--text-secondary)', marginBottom: '12px' }}>
            {finding.issue}
          </p>

          <div style={{ fontSize: '13px', color: 'var(--text-muted)', padding: '12px', background: 'var(--bg-elevated)', borderRadius: '8px' }}>
            <strong>Suggested Fix:</strong> {finding.suggested_fix}
          </div>

          {/* Thread */}
          <div className="thread">
            <div style={{ fontSize: '12px', color: 'var(--text-muted)', marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '1px' }}>
              Conversation
            </div>

            {/* Show all messages */}
            {thread?.messages?.map((msg, i) => (
              <div key={i} className={`message message-${msg.role}`}>
                <div style={{ fontSize: '11px', color: 'var(--text-muted)', marginBottom: '4px' }}>
                  {msg.role === 'system' ? 'ðŸ¤– Question' : msg.role === 'human' ? 'ðŸ‘¤ You' : 'ðŸŽ¯ PM'}
                </div>
                {msg.text}
              </div>
            ))}

            {/* Show current question if not all answered */}
            {!isResolved && hasMoreQuestions && (
              <>
                <div className="message message-system">
                  <div style={{ fontSize: '11px', color: 'var(--text-muted)', marginBottom: '4px' }}>ðŸ¤– Question</div>
                  {currentQuestion}
                </div>

                <div className="quick-answers">
                  <button className="quick-btn" onClick={() => handleQuickAnswer('Yes')}>Yes</button>
                  <button className="quick-btn" onClick={() => handleQuickAnswer('No')}>No</button>
                  <button className="quick-btn" onClick={() => handleQuickAnswer('Skip for now')}>Skip</button>
                </div>

                <div className="input-group">
                  <input 
                    className="input" 
                    placeholder="Type your answer..." 
                    value={answer}
                    onChange={e => setAnswer(e.target.value)}
                    onKeyDown={e => e.key === 'Enter' && handleSend()}
                  />
                  <button className="btn btn-primary" onClick={handleSend}>Send</button>
                </div>
              </>
            )}

            {/* All questions answered - show resolve button */}
            {!isResolved && !hasMoreQuestions && thread?.messages?.length > 0 && (
              <div style={{ marginTop: '16px', display: 'flex', gap: '8px' }}>
                <button className="btn btn-success" onClick={() => onResolve(finding.id)}>
                  âœ“ Mark Resolved & Create Ticket
                </button>
                <button className="btn btn-secondary" onClick={() => onAnswer(finding.id, '[Request: Need more info]')}>
                  Need More Discussion
                </button>
              </div>
            )}

            {/* Already resolved */}
            {isResolved && thread.decision && (
              <div style={{ marginTop: '12px', padding: '12px', background: 'rgba(16,185,129,0.1)', borderRadius: '8px', border: '1px solid rgba(16,185,129,0.2)' }}>
                <div style={{ fontSize: '12px', color: 'var(--success)', fontWeight: 600 }}>
                  âœ“ Resolved â†’ {thread.decision.ticket_id || 'Ticket created'}
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    function CommandModal({ decisions, onClose }) {
      const [copied, setCopied] = useState(false);
      
      const pmCommand = `You are the PM. Read docs/data/decisions.json and:
1. For each "resolved" finding, verify a ticket exists in tickets.json
2. For any "in_discussion" findings, add your follow-up questions
3. Update findings.json status to "ticketed" for completed items
4. Run: node docs/scripts/generate-pm-dashboard.js`;

      const decisionsJson = JSON.stringify(decisions, null, 2);

      const copyToClipboard = (text) => {
        navigator.clipboard.writeText(text);
        setCopied(true);
        setTimeout(() => setCopied(false), 2000);
      };

      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal fade-in" onClick={e => e.stopPropagation()}>
            <div className="modal-header">
              <h2 style={{ fontSize: '18px', fontWeight: 600 }}>ðŸ“‹ Next Steps</h2>
              <button className="btn btn-sm btn-secondary" onClick={onClose}>Ã—</button>
            </div>
            <div className="modal-body">
              <div style={{ marginBottom: '24px' }}>
                <h3 style={{ fontSize: '14px', color: 'var(--text-muted)', marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                  Step 1: Save decisions.json
                </h3>
                <p style={{ fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '12px' }}>
                  Copy this and paste into <code>docs/data/decisions.json</code>:
                </p>
                <div style={{ position: 'relative' }}>
                  <pre style={{ background: 'var(--bg-elevated)', padding: '16px', borderRadius: '8px', fontSize: '11px', maxHeight: '200px', overflow: 'auto' }}>
                    {decisionsJson}
                  </pre>
                  <button 
                    className="btn btn-sm btn-primary" 
                    style={{ position: 'absolute', top: '8px', right: '8px' }}
                    onClick={() => copyToClipboard(decisionsJson)}
                  >
                    {copied ? 'âœ“ Copied!' : 'Copy JSON'}
                  </button>
                </div>
              </div>

              <div>
                <h3 style={{ fontSize: '14px', color: 'var(--text-muted)', marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '1px' }}>
                  Step 2: Paste into Cursor (PM Agent)
                </h3>
                <p style={{ fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '12px' }}>
                  Open a new Cursor chat and paste:
                </p>
                <div style={{ position: 'relative' }}>
                  <pre style={{ background: 'var(--bg-elevated)', padding: '16px', borderRadius: '8px', fontSize: '12px', whiteSpace: 'pre-wrap' }}>
                    {pmCommand}
                  </pre>
                  <button 
                    className="btn btn-sm btn-primary" 
                    style={{ position: 'absolute', top: '8px', right: '8px' }}
                    onClick={() => copyToClipboard(pmCommand)}
                  >
                    Copy Command
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // ================= MAIN APP =================

    function App() {
      const [tab, setTab] = useState('pending');
      const [showCommand, setShowCommand] = useState(false);
      
      // Initialize decisions from localStorage or defaults
      const [decisions, setDecisions] = useState(() => {
        const saved = localStorage.getItem('pm-decisions');
        if (saved) return JSON.parse(saved);
        
        // Default threads based on findings
        return {
          threads: FINDINGS_DATA.findings.map(f => ({
            finding_id: f.id,
            status: f.status === 'ticketed' ? 'resolved' : 'pending',
            messages: [],
            decision: f.status === 'ticketed' ? { ticket_id: f.ticket_id } : null
          }))
        };
      });

      // Save to localStorage on change
      useEffect(() => {
        localStorage.setItem('pm-decisions', JSON.stringify(decisions));
      }, [decisions]);

      const getThread = (findingId) => {
        return decisions.threads.find(t => t.finding_id === findingId);
      };

      const handleAnswer = (findingId, answer) => {
        setDecisions(prev => {
          const newThreads = prev.threads.map(t => {
            if (t.finding_id !== findingId) return t;
            
            const finding = FINDINGS_DATA.findings.find(f => f.id === findingId);
            const questionIndex = t.messages.filter(m => m.role === 'human').length;
            const question = finding.questions[questionIndex];
            
            return {
              ...t,
              status: 'in_discussion',
              messages: [
                ...t.messages,
                ...(t.messages.length === 0 || t.messages[t.messages.length - 1].role === 'human' 
                  ? [{ role: 'system', text: question, timestamp: new Date().toISOString() }] 
                  : []),
                { role: 'human', text: answer, timestamp: new Date().toISOString() }
              ]
            };
          });
          return { ...prev, threads: newThreads };
        });
      };

      const handleResolve = (findingId) => {
        setDecisions(prev => ({
          ...prev,
          threads: prev.threads.map(t => 
            t.finding_id === findingId 
              ? { ...t, status: 'resolved', decision: { action: 'create_ticket', timestamp: new Date().toISOString() } }
              : t
          )
        }));
      };

      // Stats
      const stats = useMemo(() => {
        const pending = decisions.threads.filter(t => t.status === 'pending').length;
        const inDiscussion = decisions.threads.filter(t => t.status === 'in_discussion').length;
        const resolved = decisions.threads.filter(t => t.status === 'resolved').length;
        return { pending, inDiscussion, resolved, total: decisions.threads.length };
      }, [decisions]);

      // Filter findings by tab
      const filteredFindings = useMemo(() => {
        return FINDINGS_DATA.findings.filter(f => {
          const thread = getThread(f.id);
          if (tab === 'pending') return thread?.status === 'pending';
          if (tab === 'in_discussion') return thread?.status === 'in_discussion';
          if (tab === 'resolved') return thread?.status === 'resolved';
          return true;
        });
      }, [tab, decisions]);

      return (
        <div style={{ minHeight: '100vh', padding: '40px 48px' }}>
          {/* Header */}
          <header style={{ marginBottom: '32px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
            <div>
              <h1 style={{ fontSize: '28px', fontWeight: 800, background: 'var(--gradient-hero)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                PM Dashboard
              </h1>
              <p style={{ color: 'var(--text-muted)', marginTop: '4px' }}>
                Answer questions â€¢ Resolve findings â€¢ Generate tickets
              </p>
            </div>
            <button className="btn btn-primary" onClick={() => setShowCommand(true)}>
              ðŸ“‹ Get PM Command
            </button>
          </header>

          {/* Stats */}
          <div style={{ display: 'flex', gap: '16px', marginBottom: '24px' }}>
            <div className="card" style={{ flex: 1, textAlign: 'center', padding: '16px' }}>
              <div style={{ fontSize: '24px', fontWeight: 700, color: 'var(--accent-bright)' }}>{stats.pending}</div>
              <div style={{ fontSize: '12px', color: 'var(--text-muted)', textTransform: 'uppercase' }}>Pending</div>
            </div>
            <div className="card" style={{ flex: 1, textAlign: 'center', padding: '16px' }}>
              <div style={{ fontSize: '24px', fontWeight: 700, color: 'var(--high)' }}>{stats.inDiscussion}</div>
              <div style={{ fontSize: '12px', color: 'var(--text-muted)', textTransform: 'uppercase' }}>In Discussion</div>
            </div>
            <div className="card" style={{ flex: 1, textAlign: 'center', padding: '16px' }}>
              <div style={{ fontSize: '24px', fontWeight: 700, color: 'var(--success)' }}>{stats.resolved}</div>
              <div style={{ fontSize: '12px', color: 'var(--text-muted)', textTransform: 'uppercase' }}>Resolved</div>
            </div>
            <div className="card" style={{ flex: 1, textAlign: 'center', padding: '16px' }}>
              <div style={{ fontSize: '24px', fontWeight: 700 }}>{TICKETS_DATA.meta.total_tickets}</div>
              <div style={{ fontSize: '12px', color: 'var(--text-muted)', textTransform: 'uppercase' }}>Tickets</div>
            </div>
          </div>

          {/* Tabs */}
          <div className="tabs" style={{ marginBottom: '24px', width: 'fit-content' }}>
            <button className={`tab ${tab === 'pending' ? 'active' : ''}`} onClick={() => setTab('pending')}>
              ðŸ“‹ Pending <span className="count">{stats.pending}</span>
            </button>
            <button className={`tab ${tab === 'in_discussion' ? 'active' : ''}`} onClick={() => setTab('in_discussion')}>
              ðŸ’¬ In Discussion <span className="count">{stats.inDiscussion}</span>
            </button>
            <button className={`tab ${tab === 'resolved' ? 'active' : ''}`} onClick={() => setTab('resolved')}>
              âœ“ Resolved <span className="count">{stats.resolved}</span>
            </button>
          </div>

          {/* Findings */}
          <div>
            {filteredFindings.length === 0 ? (
              <div className="card" style={{ textAlign: 'center', padding: '60px' }}>
                <div style={{ fontSize: '48px', marginBottom: '16px' }}>
                  {tab === 'pending' ? 'ðŸŽ‰' : tab === 'in_discussion' ? 'ðŸ’¤' : 'ðŸ“‹'}
                </div>
                <div style={{ color: 'var(--text-muted)' }}>
                  {tab === 'pending' ? 'All findings answered!' : 
                   tab === 'in_discussion' ? 'No ongoing discussions' :
                   'No resolved findings yet'}
                </div>
              </div>
            ) : (
              filteredFindings.map(finding => (
                <FindingCard 
                  key={finding.id}
                  finding={finding}
                  thread={getThread(finding.id)}
                  onAnswer={handleAnswer}
                  onResolve={handleResolve}
                />
              ))
            )}
          </div>

          {/* Command Modal */}
          {showCommand && (
            <CommandModal decisions={decisions} onClose={() => setShowCommand(false)} />
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
