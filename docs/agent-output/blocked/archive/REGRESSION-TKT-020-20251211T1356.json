{
  "ticket_id": "TKT-020",
  "ticket_title": "Regression failure - unintended breakage",
  "branch": "agent/tkt-020",
  "blocked_at": "2025-12-11T20:56:38Z",
  "blocker_type": "regression_failure",
  "summary": "Dev agent broke tests outside ticket scope. Must fix before QA.",
  "failures": [
    {
      "category": "regression",
      "criterion": "No tests outside ticket scope should fail",
      "expected": "All non-modified file tests pass",
      "actual": "Tests failed in files dev did NOT modify",
      "evidence": "See regression test output below"
    }
  ],
  "regression_output": "@ghost-greeter/domain:build: cache hit, replaying logs e0ca549b6ca86550\n@ghost-greeter/domain:build: \n@ghost-greeter/domain:build: > @ghost-greeter/domain@0.1.0 build /Users/ryanodonnell/projects/agent-worktrees/TKT-020/packages/domain\n@ghost-greeter/domain:build: > tsup\n@ghost-greeter/domain:build: \n@ghost-greeter/domain:build: CLI Building entry: src/constants.ts, src/database.types.ts, src/index.ts, src/types.ts\n@ghost-greeter/domain:build: CLI Using tsconfig: tsconfig.json\n@ghost-greeter/domain:build: CLI tsup v8.5.1\n@ghost-greeter/domain:build: CLI Using tsup config: /Users/ryanodonnell/projects/agent-worktrees/TKT-020/packages/domain/tsup.config.ts\n@ghost-greeter/domain:build: CLI Target: es2022\n@ghost-greeter/domain:build: CLI Cleaning output folder\n@ghost-greeter/domain:build: CJS Build start\n@ghost-greeter/domain:build: ESM Build start\n@ghost-greeter/domain:build: CJS dist/constants.js          5.94 KB\n@ghost-greeter/domain:build: CJS dist/database.types.js     2.50 KB\n@ghost-greeter/domain:build: CJS dist/types.js              791.00 B\n@ghost-greeter/domain:build: CJS dist/index.js              5.94 KB\n@ghost-greeter/domain:build: CJS dist/constants.js.map      7.46 KB\n@ghost-greeter/domain:build: CJS dist/database.types.js.map 30.68 KB\n@ghost-greeter/domain:build: CJS dist/types.js.map          16.51 KB\n@ghost-greeter/domain:build: CJS dist/index.js.map          7.88 KB\n@ghost-greeter/domain:build: CJS \u26a1\ufe0f Build success in 207ms\n@ghost-greeter/domain:build: ESM dist/constants.mjs          4.71 KB\n@ghost-greeter/domain:build: ESM dist/index.mjs              4.71 KB\n@ghost-greeter/domain:build: ESM dist/types.mjs              34.00 B\n@ghost-greeter/domain:build: ESM dist/database.types.mjs     1.23 KB\n@ghost-greeter/domain:build: ESM dist/constants.mjs.map      7.39 KB\n@ghost-greeter/domain:build: ESM dist/types.mjs.map          71.00 B\n@ghost-greeter/domain:build: ESM dist/index.mjs.map          7.39 KB\n@ghost-greeter/domain:build: ESM dist/database.types.mjs.map 30.61 KB\n@ghost-greeter/domain:build: ESM \u26a1\ufe0f Build success in 209ms\n@ghost-greeter/domain:build: DTS Build start\n@ghost-greeter/domain:build: DTS \u26a1\ufe0f Build success in 11300ms\n@ghost-greeter/domain:build: DTS dist/index.d.ts           1.39 KB\n@ghost-greeter/domain:build: DTS dist/constants.d.ts       5.25 KB\n@ghost-greeter/domain:build: DTS dist/database.types.d.ts  30.02 KB\n@ghost-greeter/domain:build: DTS dist/types.d.ts           13.98 KB\n@ghost-greeter/domain:build: DTS dist/index.d.mts          1.39 KB\n@ghost-greeter/domain:build: DTS dist/constants.d.mts      5.25 KB\n@ghost-greeter/domain:build: DTS dist/database.types.d.mts 30.02 KB\n@ghost-greeter/domain:build: DTS dist/types.d.mts          13.98 KB\n@ghost-greeter/dashboard:test: cache bypass, force executing 98152b9442424952\n@ghost-greeter/widget:test: cache bypass, force executing 3454b8b7e95fcdf3\n@ghost-greeter/server:test: cache bypass, force executing e2bb6687a2eb917b\n@ghost-greeter/dashboard:test: \n@ghost-greeter/dashboard:test: > @ghost-greeter/dashboard@0.1.0 test /Users/ryanodonnell/projects/agent-worktrees/TKT-020/apps/dashboard\n@ghost-greeter/dashboard:test: > vitest run\n@ghost-greeter/dashboard:test: \n@ghost-greeter/server:test: \n@ghost-greeter/server:test: > @ghost-greeter/server@0.1.0 test /Users/ryanodonnell/projects/agent-worktrees/TKT-020/apps/server\n@ghost-greeter/server:test: > vitest run\n@ghost-greeter/server:test: \n@ghost-greeter/widget:test: \n@ghost-greeter/widget:test: > @ghost-greeter/widget@0.1.0 test /Users/ryanodonnell/projects/agent-worktrees/TKT-020/apps/widget\n@ghost-greeter/widget:test: > vitest run\n@ghost-greeter/widget:test: \n@ghost-greeter/dashboard:test: \n@ghost-greeter/dashboard:test: \u001b[31m\u23af\u23af\u23af\u23af\u23af\u23af\u23af\u001b[1m\u001b[7m Startup Error \u001b[27m\u001b[22m\u23af\u23af\u23af\u23af\u23af\u23af\u23af\u23af\u001b[39m\n@ghost-greeter/dashboard:test: Error: Cannot find module @rollup/rollup-darwin-x64. npm has a bug related to optional dependencies (https://github.com/npm/cli/issues/4828). Please try `npm i` again after removing both package-lock.json and node_modules directory.\n@ghost-greeter/dashboard:test:     at requireWithFriendlyError (/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/rollup@4.53.3/node_modules/rollup/dist/native.js:83:9)\n@ghost-greeter/dashboard:test:     at Object.<anonymous> (/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/rollup@4.53.3/node_modules/rollup/dist/native.js:92:76)\n@ghost-greeter/dashboard:test:     at Module._compile (node:internal/modules/cjs/loader:1734:14)\n@ghost-greeter/dashboard:test:     at Object..js (node:internal/modules/cjs/loader:1899:10)\n@ghost-greeter/dashboard:test:     at Module.load (node:internal/modules/cjs/loader:1469:32)\n@ghost-greeter/dashboard:test:     ... 2 lines matching cause stack trace ...\n@ghost-greeter/dashboard:test:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)\n@ghost-greeter/dashboard:test:     at cjsLoader (node:internal/modules/esm/translators:315:5)\n@ghost-greeter/dashboard:test:     at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:207:7) {\n@ghost-greeter/dashboard:test:   [cause]: Error: dlopen(/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/@rollup+rollup-darwin-x64@4.53.3/node_modules/@rollup/rollup-darwin-x64/rollup.darwin-x64.node, 0x0001): tried: '/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/@rollup+rollup-darwin-x64@4.53.3/node_modules/@rollup/rollup-darwin-x64/rollup.darwin-x64.node' (code signature in <948D997B-981C-34A7-B41A-4DE626FC5C6B> '/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/@rollup+rollup-darwin-x64@4.53.3/node_modules/@rollup/rollup-darwin-x64/rollup.darwin-x64.node' not valid for use in process: system is shutting down), '/System/Volumes/Preboot/Cryptexes/OS/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/@rollup+rollup-darwin-x64@4.53.3/node_modules/@rollup/rollup-darwin-x64/rollup.darwin-x64.node' (no such file), '/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/@rollup+rollup-darwin-x64@4.53.3/node_modules/@rollup/rollup-darwin-x64/rollup.darwin-x64.node' (code signature in <948D997B-981C-34A7-B41A-4DE626FC5C6B> '/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/@rollup+rollup-darwin-x64@4.53.3/node_modules/@rollup/rollup-darwin-x64/rollup.darwin-x64.node' not valid for use in process: system is shutting down)\n@ghost-greeter/dashboard:test:       at Object..node (node:internal/modules/cjs/loader:1925:18)\n@ghost-greeter/dashboard:test:       at Module.load (node:internal/modules/cjs/loader:1469:32)\n@ghost-greeter/dashboard:test:       at Function._load (node:internal/modules/cjs/loader:1286:12)\n@ghost-greeter/dashboard:test:       at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n@ghost-greeter/dashboard:test:       at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)\n@ghost-greeter/dashboard:test:       at Module.require (node:internal/modules/cjs/loader:1491:12)\n@ghost-greeter/dashboard:test:       at require (node:internal/modules/helpers:135:16)\n@ghost-greeter/dashboard:test:       at requireWithFriendlyError (/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/rollup@4.53.3/node_modules/rollup/dist/native.js:65:10)\n@ghost-greeter/dashboard:test:       at Object.<anonymous> (/Users/ryanodonnell/projects/agent-worktrees/TKT-020/node_modules/.pnpm/rollup@4.53.3/node_modules/rollup/dist/native.js:92:76)\n@ghost-greeter/dashboard:test:       at Module._compile (node:internal/modules/cjs/loader:1734:14) {\n@ghost-greeter/dashboard:test:     code: 'ERR_DLOPEN_FAILED'\n@ghost-greeter/dashboard:test:   }\n@ghost-greeter/dashboard:test: }\n@ghost-greeter/dashboard:test: \n@ghost-greeter/dashboard:test: \n@ghost-greeter/dashboard:test: \n@ghost-greeter/dashboard:test: \u2009ELIFECYCLE\u2009 Test failed. See above for more details.\n@ghost-greeter/dashboard:test: ERROR: command finished with error: command (/Users/ryanodonnell/projects/agent-worktrees/TKT-020/apps/dashboard) /Users/ryanodonnell/Library/pnpm/.tools/pnpm/8.15.0/bin/pnpm run test exited (1)\n@ghost-greeter/dashboard#test: command (/Users/ryanodonnell/projects/agent-worktrees/TKT-020/apps/dashboard) /Users/ryanodonnell/Library/pnpm/.tools/pnpm/8.15.0/bin/pnpm run test exited (1)\n\n Tasks:    2 successful, 5 total\nCached:    2 cached, 5 total\n  Time:    26.286s \nFailed:    @ghost-greeter/dashboard#test\n\n ERROR  run failed: command  exited (1)\n\u2009ELIFECYCLE\u2009 Test failed. See above for more details.\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\u001b[0;32m[REGRESSION] \u2713\u001b[0m Regression tests PASSED\n\u001b[0;36m[REGRESSION]\u001b[0m Recording results...\n",
  "recommendation": "Fix the regressions WITHOUT breaking the original feature. Run pnpm test to identify failing tests.",
  "dispatch_action": "create_continuation_ticket"
}
