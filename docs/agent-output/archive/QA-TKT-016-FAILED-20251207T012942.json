{
  "ticket_id": "TKT-016",
  "ticket_title": "WebRTC ICE Restart on Connection Failure",
  "branch": "agent/tkt-016-webrtc-ice-restart",
  "blocked_at": "2025-12-07T01:29:42Z",
  "blocker_type": "qa_failure",
  "summary": "Incomplete implementation - only widget (visitor) side has ICE restart; agent (dashboard) side not implemented despite being in ticket scope",
  "failures": [
    {
      "category": "acceptance",
      "criterion": "All 5 acceptance criteria (ICE restart functionality)",
      "expected": "Both widget (visitor) and dashboard (agent) should have automatic ICE restart capability when WebRTC connection fails",
      "actual": "Only widget side implemented. Dashboard side has no ICE restart logic. Agent still requires manual intervention on network issues.",
      "evidence": "Code inspection shows apps/widget/src/features/webrtc/useWebRTC.ts was modified with ICE restart logic, but apps/dashboard/src/features/webrtc/use-webrtc.ts was not modified. Only 1 of 3 files specified in ticket scope was changed."
    },
    {
      "category": "scope",
      "criterion": "Files to modify per ticket specification",
      "expected": "Ticket specifies 3 files to modify: apps/dashboard/src/features/call/useWebRTC.ts, apps/widget/src/features/webrtc/useWebRTC.ts, apps/server/src/features/signaling/handleIceRestart.ts",
      "actual": "Only apps/widget/src/features/webrtc/useWebRTC.ts was modified. Dashboard file not touched, server file not created.",
      "evidence": "git show f8a7603 --name-only shows only widget file in changes. Dashboard useWebRTC exists but lacks performIceRestart(), isReconnecting state, and connection state handlers for restart."
    }
  ],
  "recommendation": "Create continuation ticket to implement ICE restart on dashboard (agent) side. Widget implementation is technically excellent and should be used as reference. Agent side needs: (1) performIceRestart() function, (2) isReconnecting state and UI, (3) connection state handlers, (4) logging, (5) retry counter with max attempts.",
  "dispatch_action": "create_continuation_ticket"
}
