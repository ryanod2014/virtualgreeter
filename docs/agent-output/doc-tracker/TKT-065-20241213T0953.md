# Doc Complete: TKT-065

- **Ticket:** TKT-065
- **Status:** COMPLETE
- **Doc File:** `docs/features/admin/blocklist-settings.md`
- **Sections Updated:**
  - Section 2 (HOW IT WORKS): Updated high-level flow and state machine
  - Section 4 (EDGE CASES): Updated geolocation failure scenarios
  - Section 5 (UI/UX REVIEW): Added geo-failure handling UI step and visual design
  - Section 8 (CODE REFERENCES): Added references to geo-failure handling code
  - Section 10 (OPEN QUESTIONS): Added question about tracking actual failure rates
- **Completed At:** 2024-12-13T09:53

## Changes Made

Updated the blocklist settings documentation to reflect the new geo-failure handling toggle feature added in TKT-065:

1. **Updated State Machine**: The state machine now shows that unknown country behavior depends on the `geo_failure_handling` setting rather than being hardcoded based on mode
2. **Added Geo-Failure Handling Section**: Added a new section in the state machine explaining the two options (Allow/Block)
3. **Updated Edge Cases**: Changed edge cases 5 & 6 to reflect the new configurable behavior
4. **Updated UI Flow**: Added step 3 for configuring geo-failure handling in the user experience audit
5. **Updated Visual Design**: Added description of the new geo-failure handling UI section with toggle cards
6. **Updated Code References**: Added line numbers for the new geo-failure handling UI and server logic
7. **Updated Data Flow**: Added `geo_failure_handling` field to the database update example

The documentation now accurately reflects how admins can configure what happens when geolocation fails, giving them control over whether to be lenient (allow) or strict (block) with visitors whose location cannot be determined.