# Ticket Agent: Create Continuation for TKT-022

> **Type:** Continuation Ticket Creation
> **Original Ticket:** TKT-022
> **Branch:** `agent/tkt-022`
> **Current Iteration:** 1
> **Session ID:** `90716c3e-3419-494d-acbe-8c11411d2e91`

---

## Your Mission

Read docs/workflow/TICKET_AGENT_SOP.md and create a continuation ticket for TKT-022.

---

## Original Ticket Info

**Title:** Enforce Seat Limit in API

**Branch:** `agent/tkt-022` (already exists - continuation uses same branch)

**Files to Modify:**
- `apps/dashboard/src/app/api/billing/seats/route.ts`

---

## Blocker Info

**Blocker File:** `QA-TKT-022-20251212T210109.json`

**Blocker Context:**
```json
{
  "ticket_id": "TKT-022",
  "blocker_type": "qa_failure",
  "branch": "agent/tkt-022",
  "summary": "QA validation failed - button click handler not working correctly",
  "failures": [
    "Expected onClick to trigger form submission but it did nothing"
  ],
  "recommendation": "Check the onClick handler binding"
}
```

---

## Your Task

Follow TICKET_AGENT_SOP.md exactly:

1. **Read the blocker** to understand why the previous attempt failed

2. **Gather context:**
   ```bash
   # Get git diff of what was attempted
   git fetch origin
   git diff main..origin/agent/tkt-022 -- .

   # Get commit history
   git log --oneline -10 origin/agent/tkt-022

   # Check for previous continuation attempts
   ls docs/prompts/active/dev-agent-TKT-022-v*.md 2>/dev/null
   ```

3. **Determine if human needed:**
   - If blocker type is `clarification`, `environment`, or `external_setup` → route to inbox
   - If blocker type is `qa_failure`, `regression_failure`, or `ci_failure` → create continuation

4. **Create continuation ticket:**
   ```bash
   ./scripts/agent-cli.sh update-ticket TKT-022 \
     --status continuation_ready \
     --iteration 2
   ```

5. **Generate prompt file** at: `docs/prompts/active/dev-agent-TKT-022-v2.md`
   
   Use the template from TICKET_AGENT_SOP.md - include:
   - What v1 Dev Agent changed (from git diff)
   - Why it failed (from blocker)
   - Key mistake to avoid
   - Full failure details
   - Original acceptance criteria

6. **Archive the blocker file:**
   ```bash
   mv /Users/ryanodonnell/projects/Digital_greeter/docs/agent-output/blocked/QA-TKT-022-20251212T210109.json \
      /Users/ryanodonnell/projects/Digital_greeter/docs/agent-output/archive/
   ```

7. **Signal completion:**
   ```bash
   ./scripts/agent-cli.sh complete --session 90716c3e-3419-494d-acbe-8c11411d2e91
   ```

---

## Output Report

When done, write a summary:

```markdown
## Ticket Agent Report

**Action:** Created continuation
**Continuation ID:** TKT-022-v2
**Prompt File:** docs/prompts/active/dev-agent-TKT-022-v2.md

**Source:** Blocker: QA-TKT-022-20251212T210109.json

**Ready for:** Dev Agent pickup
```
