# EXECUTE IMMEDIATELY: Create Continuation for TKT-013

**DO NOT ASK QUESTIONS. EXECUTE THESE STEPS IN ORDER.**

---

## Context

- **Ticket:** TKT-013 - "TKT-013"
- **Branch:** `agent/tkt-013` (already exists)
- **Current Iteration:** 1 → creating v2
- **Blocker File:** `QA-TKT-013-FAILED-20251213T0945.json`

### Blocker Details

```json
{
  "ticket_id": "TKT-013",
  "ticket_title": "Retention Policy Retroactive Deletion Warning",
  "branch": "agent/tkt-013",
  "blocked_at": "2025-12-13T09:45:00Z",
  "blocker_type": "qa_failure",
  "summary": "Cannot verify retention modal feature - no test recordings exist. Also 27 new type errors introduced.",
  "failures": [
    {
      "category": "build",
      "criterion": "No new type errors",
      "expected": "Type errors ≤ 12 (main branch count)",
      "actual": "39 type errors (27 new)",
      "evidence": "pnpm typecheck shows 39 errors vs 12 on main"
    },
    {
      "category": "acceptance",
      "criterion": "Modal shows exact count of recordings to be deleted",
      "expected": "Confirmation modal appears with recording count when reducing retention",
      "actual": "Modal did not appear - no recordings exist to be affected",
      "evidence": "Settings saved directly without modal when changing 90→7 days"
    }
  ],
  "recommendation": "Fix type errors and create test environment with existing recordings for proper testing",
  "dispatch_action": "create_continuation_ticket"
}
```

---

## STEP 1: Analyze the Blocker

Run these commands to understand what happened:

```bash
# See what the previous dev attempt changed
git fetch origin
git log --oneline -5 origin/agent/tkt-013

# Check if there are build errors
cd apps/dashboard && pnpm build 2>&1 | head -50
```

---

## STEP 2: Create the Continuation Prompt

Write this file: `docs/prompts/active/dev-agent-TKT-013-v2.md`

Use this template:

```markdown
# Dev Agent Continuation: TKT-013-v2

> **Type:** Continuation (retry from blocker)
> **Original Ticket:** TKT-013
> **Branch:** \`agent/tkt-013\` (ALREADY EXISTS)
> **Attempt:** v2

---

## PREVIOUS ATTEMPT FAILED

[Summarize the blocker - what went wrong, why it failed]

---

## YOUR TASK

1. [Fix step 1 based on blocker analysis]
2. [Fix step 2]
3. Verify with: \`pnpm typecheck && pnpm build\`
4. Commit and push

---

## Verification

After fixes:
\`\`\`bash
curl -X PUT http://localhost:3456/api/v2/tickets/TKT-013 \\
  -H 'Content-Type: application/json' \\
  -d '{"status": "dev_complete"}'
\`\`\`
```

---

## STEP 3: Update Ticket Status

```bash
curl -X PUT http://localhost:3456/api/v2/tickets/TKT-013 \
  -H "Content-Type: application/json" \
  -d '{"status": "continuation_ready", "iteration": 2}'
```

---

## STEP 4: Archive Blocker (if exists)

```bash
if [ -f "docs/agent-output/blocked/QA-TKT-013-FAILED-20251213T0945.json" ]; then
  mkdir -p docs/agent-output/archive
  mv "docs/agent-output/blocked/QA-TKT-013-FAILED-20251213T0945.json" docs/agent-output/archive/
fi
```

---

## STEP 5: Done

Print this report and exit:

```
✅ Ticket Agent Complete
- Created: docs/prompts/active/dev-agent-TKT-013-v2.md  
- Status: continuation_ready
- Next: Dev Agent will pick up automatically
```
